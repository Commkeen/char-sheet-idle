{"version":3,"sources":["webpack:///$_lazy_route_resources|lazy|groupOptions: {}|namespace object","webpack:///src/app/app.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/components/character-panel/character-panel.component.html","webpack:///src/app/components/character-panel/character-panel.component.ts","webpack:///src/app/components/character-sheet-panel/character-sheet-panel.component.html","webpack:///src/app/components/character-sheet-panel/character-sheet-panel.component.ts","webpack:///src/app/components/common/game-button/game-button.component.ts","webpack:///src/app/components/common/game-button/game-button.component.html","webpack:///src/app/components/common/progress-bar/progress-bar.component.ts","webpack:///src/app/components/common/progress-bar/progress-bar.component.html","webpack:///src/app/components/location-panel/location-panel.component.html","webpack:///src/app/components/location-panel/location-panel.component.ts","webpack:///src/app/components/message-panel/message-panel.component.html","webpack:///src/app/components/message-panel/message-panel.component.ts","webpack:///src/app/components/nav-panel/nav-panel.component.html","webpack:///src/app/components/nav-panel/nav-panel.component.ts","webpack:///src/app/components/skill-panel/skill-panel.component.html","webpack:///src/app/components/skill-panel/skill-panel.component.ts","webpack:///src/app/components/status-panel/status-panel.component.html","webpack:///src/app/components/status-panel/status-panel.component.ts","webpack:///src/app/models/character.ts","webpack:///src/app/models/venture.ts","webpack:///src/app/pipes/display-number.pipe.ts","webpack:///src/app/services/character.service.ts","webpack:///src/app/services/game.service.ts","webpack:///src/app/services/message.service.ts","webpack:///src/app/services/time.service.ts","webpack:///src/app/staticData/dieDefinitions.ts","webpack:///src/app/staticData/encounterDefinitions.ts","webpack:///src/app/staticData/itemDefinitions.ts","webpack:///src/app/staticData/perkDefinitions.ts","webpack:///src/app/staticData/regionDefinitions.ts","webpack:///src/app/staticData/skillDefinitions.ts","webpack:///src/app/staticData/ventureDefinitions.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","id","module","exports","AppComponent","_timeService","title","showLocation","showCharacterSheet","startGame","onSelectCharSheet","onSelectRegion","AppModule","BrowserModule","FlexModule","LocationPanelComponent","CharacterPanelComponent","MessagePanelComponent","GameButtonComponent","ProgressBarComponent","DisplayNumberPipe","SkillPanelComponent","StatusPanelComponent","NavPanelComponent","CharacterSheetPanelComponent","_gameService","_characterService","character","ap","getCurrentDie","result","nextDie","getNextDie","cost","nextUnlock","getNextStatUnlock","stat","getCharacter","name","level","xp","getLevelCost","stamina","maxStamina","stats","getDie","count","faces","rollNewCharacter","upgradeDie","unlockStat","rest","perks","availablePerks","perk","getPerkDef","buyPerk","click","EventEmitter","event","stopPropagation","emit","onClick","value","max","Math","min","localVentures","ventures","v","selectVenture","_messageService","messageBuffer","messageBufferSize","msgFeed","subscribe","x","onMessage","msg","push","length","splice","selectRegion","selectCharSheet","REGION_LIBRARY","region","getSkills","filter","getSkillDef","group","skills","skill","getSkillRankCost","rank","tgt","targetVenture","find","venture","getTargetVenture","encounterName","progress","progressMax","Character","Map","has","get","set","some","Perk","Skill","itemBonus","Venture","completions","args","prefix","suffix","abs","getSuffixedValue","decimalPlaces","floor","log10","toFixed","CharacterService","items","svc","die","unlockedStats","forEach","setStat","roll","initSkills","resting","addMessage","initVentures","initSim","updateSkills","updateAvailablePerks","nextLevelCost","gainLevel","newLevel","getStats","curStat","increase","newAp","SKILL_LIBRARY","def","getItemDef","canUse","requiredStat","requiredStatAmount","strength","encounter","bestSkill","bestStrength","s","hasSkill","skillDef","str","total","dT","sDef","relatedStat","nextRankCost","addPerk","PERK_LIBRARY","hasPerk","item","indexOf","GameService","dieRank","_init","setGameService","VENTURE_LIBRARY","tick","startEncounter","encDef","getEncounterDef","bestSkillForEncounter","encSkill","charSkillStr","advanceSkill","staminaDrain","xpReward","pow","gainXp","itemReward","gainItem","progDegen","progressDegenPct","ENCOUNTER_LIBRARY","getVentureDef","getRandomEncounter","DIE_LIBRARY","unlock","MessageService","Subject","message","next","tickRate","TimeService","_timerSubscription","unsubscribe","interval","DieDef","i","random","EncounterSkillDef","EncounterDef","CombatEncounterDef","initCombatSkills","addSkill","resist","ItemDef","gold","amount","ITEM_LIBRARY","setSkill","setReq","PerkDef","creationOnly","requiredLevel","requiredStatValue","RegionDef","SkillDef","setGroup","setCost","VentureDef","encounters","prereqName","prereqRank","addEncounter","addPrereq","environment","production","enableProdMode","platformBrowser","bootstrapModule","err","console","error"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 8255;\nmodule.exports = webpackEmptyAsyncContext;","<div fxLayout=\"column\" class=\"layout-container\">\r\n  <div fxFlex=\"none\" class=\"layout-header\">\r\n    Character Sheet Idle 0.1 --- Work in progress\r\n  </div>\r\n  <div fxFlex=\"none\" class=\"layout-top\">\r\n    <app-status-panel></app-status-panel>\r\n  </div>\r\n  <div fxFlex=\"80\" class=\"layout-center\">\r\n    <div fxFlex=\"none\" class=\"layout-center-left\">\r\n      <app-nav-panel (selectCharSheet)=\"onSelectCharSheet()\" (selectRegion)=\"onSelectRegion()\"></app-nav-panel>\r\n    </div>\r\n    <div fxFlex=\"80\" class=\"layout-center-center\">\r\n      <app-location-panel *ngIf=\"showLocation\"></app-location-panel>\r\n      <app-character-sheet-panel *ngIf=\"showCharacterSheet\"></app-character-sheet-panel>\r\n    </div>\r\n    <div fxFlex=\"20\" class=\"layout-center-right\">\r\n      <app-skill-panel></app-skill-panel>\r\n    </div>\r\n  </div>\r\n  <div fxFlex=\"20\" fxLayout=\"row\" class=\"layout-bottom\">\r\n    <div fxFlex=\"60\" class=\"layout-left-bottom\">\r\n      <app-character-panel></app-character-panel>\r\n    </div>\r\n    <div fxFlex=\"40\" class=\"layout-right-bottom\">\r\n      <app-message-panel></app-message-panel>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { TimeService } from './services/time.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent implements OnInit {\r\n  title = 'char-sheet-idle';\r\n\r\n  showLocation = true;\r\n  showCharacterSheet = false;\r\n\r\n  constructor(private _timeService: TimeService) { }\r\n\r\n  ngOnInit(): void {\r\n    this._timeService.startGame();\r\n  }\r\n\r\n  // ======Nav handlers======\r\n  onSelectCharSheet() {\r\n    this.showCharacterSheet = true;\r\n    this.showLocation = false;\r\n  }\r\n\r\n  onSelectRegion() {\r\n    this.showLocation = true;\r\n    this.showCharacterSheet = false;\r\n  }\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FlexModule } from '@angular/flex-layout';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { LocationPanelComponent } from './components/location-panel/location-panel.component';\r\nimport { CharacterPanelComponent } from './components/character-panel/character-panel.component';\r\nimport { MessagePanelComponent } from './components/message-panel/message-panel.component';\r\nimport { GameButtonComponent } from './components/common/game-button/game-button.component';\r\nimport { ProgressBarComponent } from './components/common/progress-bar/progress-bar.component';\r\nimport { DisplayNumberPipe } from './pipes/display-number.pipe';\r\nimport { SkillPanelComponent } from './components/skill-panel/skill-panel.component';\r\nimport { StatusPanelComponent } from './components/status-panel/status-panel.component';\r\nimport { NavPanelComponent } from './components/nav-panel/nav-panel.component';\r\nimport { CharacterSheetPanelComponent } from './components/character-sheet-panel/character-sheet-panel.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    LocationPanelComponent,\r\n    CharacterPanelComponent,\r\n    MessagePanelComponent,\r\n    GameButtonComponent,\r\n    ProgressBarComponent,\r\n    DisplayNumberPipe,\r\n    SkillPanelComponent,\r\n    StatusPanelComponent,\r\n    NavPanelComponent,\r\n    CharacterSheetPanelComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FlexModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","<div fxLayout=\"row\" class=\"game-section\">\r\n  <div fxLayout=\"column\" class=\"reroll-panel\">\r\n    <game-button (click)=\"rollNewCharacter()\">Roll New Character</game-button>\r\n    <span *ngIf=\"getCharacter() != null\">\r\n    <div>Current die: {{dieCount}}d{{dieFaces}}</div>\r\n    <br />\r\n    <div>AP: {{ap}}</div>\r\n    <game-button *ngIf=\"getNextDieCost() != null\" (click)=\"upgradeDie()\">\r\n      Upgrade Die: {{getNextDieCost()}} AP\r\n    </game-button>\r\n    <br />\r\n    <game-button *ngIf=\"getNextStatUnlockName() != null\" (click)=\"unlockStat()\">\r\n      Unlock {{getNextStatUnlockName()}}: {{getNextStatUnlockCost()}} AP\r\n    </game-button>\r\n    </span>\r\n  </div>\r\n  <div fxLayout=\"row\" class=\"character-sheet\" *ngIf=\"getCharacter() != null\">\r\n    <div fxLayout=\"column\" class=\"character-sheet-left\">\r\n      <h2>{{name}}</h2>\r\n      <div fxLayout=\"row\">\r\n        <div fxFlex=\"80\">Stamina: {{stamina | displayNumber}}/{{maxStamina}}</div>\r\n        <game-button (click)=\"rest()\">Rest</game-button>\r\n      </div>\r\n      <progress-bar [value]=\"stamina\" [max]=\"maxStamina\"></progress-bar>\r\n      <br />\r\n      <div>Level {{level}}</div>\r\n      <div>XP: {{xp}}/{{xpMax}}</div>\r\n      <progress-bar [value]=\"xp\" [max]=\"xpMax\"></progress-bar>\r\n    </div>\r\n    <div fxLayout=\"column\" class=\"character-sheet-right\">\r\n      <div>Resting at the inn</div>\r\n      <br />\r\n      <br />\r\n      <div *ngFor=\"let stat of stats | keyvalue\">\r\n        {{stat.key}}:  {{stat.value}}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Stat } from 'src/app/common/gameConstants';\r\nimport { Character } from 'src/app/models/character';\r\nimport { CharacterService } from 'src/app/services/character.service';\r\nimport { GameService } from 'src/app/services/game.service';\r\nimport { DieDef } from 'src/app/staticData/dieDefinitions';\r\n\r\n@Component({\r\n  selector: 'app-character-panel',\r\n  templateUrl: './character-panel.component.html',\r\n  styleUrls: ['./character-panel.component.scss']\r\n})\r\nexport class CharacterPanelComponent implements OnInit {\r\n\r\n  constructor(private _gameService: GameService, private _characterService: CharacterService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  getCharacter(): Character {\r\n    return this._characterService.character;\r\n  }\r\n\r\n  getAP(): number {\r\n    return this._gameService.ap;\r\n  }\r\n\r\n  getDie(): DieDef {\r\n    return this._gameService.getCurrentDie();\r\n  }\r\n\r\n  getNextDieCost(): number {\r\n    let result = null;\r\n    const nextDie = this._gameService.getNextDie();\r\n    if (nextDie != null) {result = nextDie.cost;}\r\n    return result;\r\n  }\r\n\r\n  getNextStatUnlockName() {\r\n    const nextUnlock = this._gameService.getNextStatUnlock();\r\n    if (nextUnlock == null) {return null;}\r\n    return nextUnlock.stat;\r\n  }\r\n\r\n  getNextStatUnlockCost() {\r\n    const nextUnlock = this._gameService.getNextStatUnlock();\r\n    if (nextUnlock == null) {return null;}\r\n    return nextUnlock.cost;\r\n  }\r\n\r\n  // ======Display Getters======\r\n\r\n  get name() {\r\n    return this.getCharacter().name;\r\n  }\r\n\r\n  get level() {\r\n    return this.getCharacter().level;\r\n  }\r\n\r\n  get xp() {\r\n    return this.getCharacter().xp;\r\n  }\r\n\r\n  get xpMax() {\r\n    return this._characterService.getLevelCost(this.level+1);\r\n  }\r\n\r\n  get stamina() {\r\n    return this.getCharacter().stamina;\r\n  }\r\n\r\n  get maxStamina() {\r\n    return this.getCharacter().maxStamina;\r\n  }\r\n\r\n  get stats() {\r\n    return this.getCharacter().stats;\r\n  }\r\n\r\n  getStat(stat: Stat) {\r\n    return this.getCharacter().stat(stat);\r\n  }\r\n\r\n  get ap() {\r\n    return this._gameService.ap;\r\n  }\r\n\r\n  get dieCount() {\r\n    return this.getDie().count;\r\n  }\r\n\r\n  get dieFaces() {\r\n    return this.getDie().faces;\r\n  }\r\n\r\n  // ======Click Handlers======\r\n\r\n  rollNewCharacter(): void {\r\n    this._characterService.rollNewCharacter();\r\n  }\r\n\r\n  upgradeDie(): void {\r\n    this._gameService.upgradeDie();\r\n  }\r\n\r\n  unlockStat(): void {\r\n    this._gameService.unlockStat();\r\n  }\r\n\r\n  rest(): void {\r\n    this._gameService.rest();\r\n  }\r\n\r\n}\r\n","<div fxLayout=\"row\" *ngIf=\"getCharacter() != null\" class=\"game-section\">\r\n  <div fxLayout=\"column\" fxFlex=\"50\" class=\"character-sheet-left\">\r\n    <h2>Bob the Adventurer</h2>\r\n    <div class=\"stat-list\">\r\n      <div class=\"stat\" *ngFor=\"let stat of stats | keyvalue\">\r\n        {{stat.key}}: {{stat.value}}\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div fxLayout=\"column\" fxFlex=\"50\" class=\"character-sheet-right\">\r\n    <h3>Active Perks</h3>\r\n    <div class=\"active-perk-list\">\r\n      <div class=\"active-perk\" *ngFor=\"let perk of activePerks\">\r\n        {{perk.name}}\r\n      </div>\r\n    </div>\r\n    <h3>Perk Points: 3</h3>\r\n    <div fxLayout=\"row wrap\" class=\"available-perk-list\">\r\n      <div fxFlex=\"none\" class=\"available-perk\" *ngFor=\"let perk of availablePerks\">\r\n        <game-button (click)=\"selectPerk(perk)\">{{perk.name}} ({{perkCost(perk)}} AP)</game-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Character, Perk } from 'src/app/models/character';\r\nimport { CharacterService } from 'src/app/services/character.service';\r\nimport { GameService } from 'src/app/services/game.service';\r\nimport { getPerkDef } from 'src/app/staticData/perkDefinitions';\r\n\r\n@Component({\r\n  selector: 'app-character-sheet-panel',\r\n  templateUrl: './character-sheet-panel.component.html',\r\n  styleUrls: ['./character-sheet-panel.component.scss']\r\n})\r\nexport class CharacterSheetPanelComponent implements OnInit {\r\n\r\n  constructor(private _gameService: GameService, private _characterService: CharacterService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  getCharacter(): Character {\r\n    return this._characterService.character;\r\n  }\r\n\r\n  // ======Display Getters======\r\n\r\n  get name() {\r\n    return this.getCharacter().name;\r\n  }\r\n\r\n  get level() {\r\n    return this.getCharacter().level;\r\n  }\r\n\r\n  get xp() {\r\n    return this.getCharacter().xp;\r\n  }\r\n\r\n  get stats() {\r\n    return this.getCharacter().stats;\r\n  }\r\n\r\n  get activePerks() {\r\n    return this.getCharacter().perks;\r\n  }\r\n\r\n  get availablePerks() {\r\n    return this._characterService.availablePerks;\r\n  }\r\n\r\n  perkCost(perk: Perk) {\r\n    return getPerkDef(perk.name).cost;\r\n  }\r\n\r\n  // ======Click Handlers======\r\n\r\n  selectPerk(perk: Perk) {\r\n    this._characterService.buyPerk(perk.name);\r\n  }\r\n\r\n}\r\n","import { Component, ContentChild, EventEmitter, Input, OnInit, Output } from '@angular/core';\n\n@Component({\n  selector: 'game-button',\n  templateUrl: './game-button.component.html',\n  styleUrls: ['./game-button.component.scss']\n})\nexport class GameButtonComponent implements OnInit {\n\n  @Output() click = new EventEmitter<void>();\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  onClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.click.emit();\n  }\n\n}\n","<div class=\"game-btn\" (click)=\"onClick($event)\">\n  <span class=\"text\"><ng-content></ng-content></span>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'progress-bar',\n  templateUrl: './progress-bar.component.html',\n  styleUrls: ['./progress-bar.component.scss']\n})\nexport class ProgressBarComponent implements OnInit {\n\n  @Input() value: number = 15;\n  @Input() max: number = 100;\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  getWidth(): number {\n    let result = this.value / this.max;\n    result = result*100;\n    result = Math.min(result, 100);\n    result = Math.max(0, result);\n    return result;\n  }\n\n}\n","<div class=\"bar-outer\">\n  <div class=\"bar-inner\" [style.width]=\"getWidth() + '%'\"></div>\n</div>\n","<div *ngIf=\"getCharacter() != null\" class=\"game-section\">\r\n  <div fxLayout=\"row\" class=\"region-status\">\r\n    <div fxFlex=\"34\" fxLayout=\"column\" class=\"region-status-item\">\r\n      <div>Scouting</div>\r\n      <progress-bar></progress-bar>\r\n    </div>\r\n    <div fxFlex=\"33\" fxLayout=\"column\" class=\"region-status-item\">\r\n      <div>Renown</div>\r\n      <progress-bar></progress-bar>\r\n    </div>\r\n    <div fxFlex=\"33\" fxLayout=\"column\" class=\"region-status-item\">\r\n      <div>Infamy</div>\r\n      <progress-bar></progress-bar>\r\n    </div>\r\n  </div>\r\n  <div class=\"local-ventures\">\r\n    <div class=\"venture\" fxLayout=\"row\" *ngFor=\"let venture of getVentures()\">\r\n      <div fxFlex=\"30\"></div>\r\n      <div fxFlex=\"30\" fxLayout=\"row\" class=\"venture-left\">\r\n        <game-button fxFlex=\"60\" (click)=\"selectVenture(venture)\">{{venture.name}}</game-button>\r\n        <div fxFlex=\"40\">{{venture.completions}}</div>\r\n      </div>\r\n      <div fxFlex=\"70\" class=\"venture-right\" fxLayout=\"column\">\r\n        <div>{{venture.encounterName}}</div>\r\n        <progress-bar [value]=\"venture.progress\" [max]=\"venture.progressMax\"></progress-bar>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Character } from 'src/app/models/character';\r\nimport { Venture } from 'src/app/models/venture';\r\nimport { CharacterService } from 'src/app/services/character.service';\r\nimport { GameService } from 'src/app/services/game.service';\r\n\r\n@Component({\r\n  selector: 'app-location-panel',\r\n  templateUrl: './location-panel.component.html',\r\n  styleUrls: ['./location-panel.component.scss']\r\n})\r\nexport class LocationPanelComponent implements OnInit {\r\n\r\n  constructor(private _gameService: GameService, private _characterService: CharacterService) { }\r\n\r\n  public localVentures: Venture[] = [];\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  getCharacter(): Character {\r\n    return this._characterService.character;\r\n  }\r\n\r\n  getVentures(): Venture[] {\r\n    return this._gameService.ventures;\r\n  }\r\n\r\n  // ======Display Getters======\r\n\r\n  // ======Click Handlers======\r\n  selectVenture(v: Venture): void {\r\n    this._gameService.selectVenture(v);\r\n  }\r\n\r\n}\r\n","<div class=\"game-section\">\n  <div class=\"messages\">\n    <div class=\"message\" *ngFor=\"let message of messageBuffer\">\n      {{message}}\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\r\nimport { MessageService } from 'src/app/services/message.service';\r\n\r\n@Component({\r\n  selector: 'app-message-panel',\r\n  templateUrl: './message-panel.component.html',\r\n  styleUrls: ['./message-panel.component.scss']\r\n})\r\nexport class MessagePanelComponent implements OnInit {\r\n\r\n  constructor(private _messageService: MessageService) { }\r\n\r\n  public messageBuffer: string[] = [];\r\n  public messageBufferSize: number = 8;\r\n\r\n  ngOnInit(): void {\r\n    this._messageService.msgFeed.subscribe(x => this.onMessage(x));\r\n  }\r\n\r\n  onMessage(msg: string): void {\r\n    this.messageBuffer.push(msg);\r\n    while (this.messageBuffer.length > this.messageBufferSize) {\r\n      this.messageBuffer.splice(0,1);\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"game-section\">\r\n  <div class=\"nav-top\">\r\n    <game-button (click)=\"onSelectCharSheet()\">Character Sheet</game-button>\r\n  </div>\r\n  <div class=\"nav-regions\">\r\n    <div class=\"region\" *ngFor=\"let region of regions\">\r\n      <game-button (click)=\"onSelectRegion(region)\">{{region}}</game-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\r\nimport { REGION_LIBRARY } from 'src/app/staticData/regionDefinitions';\r\n\r\n@Component({\r\n  selector: 'app-nav-panel',\r\n  templateUrl: './nav-panel.component.html',\r\n  styleUrls: ['./nav-panel.component.scss']\r\n})\r\nexport class NavPanelComponent implements OnInit {\r\n\r\n  @Output() selectRegion = new EventEmitter<string>();\r\n  @Output() selectCharSheet = new EventEmitter<void>();\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  get regions(): string[] {\r\n    return REGION_LIBRARY.map(x => x.name);\r\n  }\r\n\r\n  // ======Click Handlers======\r\n\r\n  onSelectCharSheet() {\r\n    this.selectCharSheet.emit();\r\n  }\r\n\r\n  onSelectRegion(region: string) {\r\n    this.selectRegion.emit(region);\r\n  }\r\n\r\n}\r\n","<div class=\"game-section\" *ngIf=\"getSkills() != null\">\r\n  <br />\r\n  <div class=\"combat-skills\">\r\n    <div class=\"skill\" fxLayout=\"row\" *ngFor=\"let skill of getCombatSkills()\">\r\n      <div fxFlex=\"10\" class=\"skill-total\">\r\n        {{skill.total()}}\r\n      </div>\r\n      <div fxFlex=\"90\" fxLayout=\"column\">\r\n        <div fxFlex=\"90\" fxLayout=\"row\" class=\"skill-text\">\r\n          <div fxFlex=\"90\">{{skill.name}}</div>\r\n          <div fxFlex=\"10\">{{skill.rank}}</div>\r\n        </div>\r\n        <progress-bar fxFlex=\"10\" [value]=\"skill.progress\" [max]=\"progressMax(skill)\"></progress-bar>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <br />\r\n  <div class=\"defense-skills\">\r\n    <div class=\"skill\" fxLayout=\"row\" *ngFor=\"let skill of getDefenseSkills()\">\r\n      <div fxFlex=\"10\" class=\"skill-total\">\r\n        {{skill.total()}}\r\n      </div>\r\n      <div fxFlex=\"90\" fxLayout=\"column\">\r\n        <div fxFlex=\"90\" fxLayout=\"row\" class=\"skill-text\">\r\n          <div fxFlex=\"90\">{{skill.name}}</div>\r\n          <div fxFlex=\"10\">{{skill.rank}}</div>\r\n        </div>\r\n        <progress-bar fxFlex=\"10\" [value]=\"skill.progress\" [max]=\"progressMax(skill)\"></progress-bar>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <br />\r\n  <div class=\"other-skills\">\r\n    <div class=\"skill\" fxLayout=\"row\" *ngFor=\"let skill of getOtherSkills()\">\r\n      <div fxFlex=\"10\" class=\"skill-total\">\r\n        {{skill.total()}}\r\n      </div>\r\n      <div fxFlex=\"90\" fxLayout=\"column\">\r\n        <div fxFlex=\"90\" fxLayout=\"row\" class=\"skill-text\">\r\n          <div fxFlex=\"90\">{{skill.name}}</div>\r\n          <div fxFlex=\"10\">{{skill.rank}}</div>\r\n        </div>\r\n        <progress-bar fxFlex=\"10\" [value]=\"skill.progress\" [max]=\"progressMax(skill)\"></progress-bar>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Skill } from 'src/app/models/character';\r\nimport { CharacterService } from 'src/app/services/character.service';\r\nimport { GameService } from 'src/app/services/game.service';\r\nimport { getSkillDef } from 'src/app/staticData/skillDefinitions';\r\n\r\n@Component({\r\n  selector: 'app-skill-panel',\r\n  templateUrl: './skill-panel.component.html',\r\n  styleUrls: ['./skill-panel.component.scss']\r\n})\r\nexport class SkillPanelComponent implements OnInit {\r\n\r\n  constructor(private _gameService: GameService, private _characterService: CharacterService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  getCombatSkills(): Skill[] {\r\n    return this.getSkills().filter(x => getSkillDef(x.name).group == \"combat\");\r\n  }\r\n\r\n  getDefenseSkills(): Skill[] {\r\n    return this.getSkills().filter(x => getSkillDef(x.name).group == \"defense\");\r\n  }\r\n\r\n  getOtherSkills(): Skill[] {\r\n    return this.getSkills().filter(x => getSkillDef(x.name).group == \"other\");\r\n  }\r\n\r\n  getSkills(): Skill[] {\r\n    if (this._characterService.character == null) {return null;}\r\n    return this._characterService.character.skills;\r\n  }\r\n\r\n  // ======Display Getters======\r\n  progressMax(skill: Skill): number {\r\n    return this._characterService.getSkillRankCost(skill.name, skill.rank+1);\r\n  }\r\n\r\n}\r\n","<div fxLayout=\"row\" *ngIf=\"getCharacter() != null\" class=\"game-section\">\r\n  <div fxFlex=\"30\" class=\"status-section status-level\">\r\n    Level {{level}}\r\n    <progress-bar [value]=\"xp\" [max]=\"xpMax\"></progress-bar>\r\n  </div>\r\n  <div fxFlex=\"30\" class=\"status-section status-stamina\">\r\n    Stamina: {{stamina | displayNumber}}/{{maxStamina | displayNumber}}\r\n    <progress-bar [value]=\"stamina\" [max]=\"maxStamina\"></progress-bar>\r\n  </div>\r\n  <div fxFlex=\"30\" class=\"status-section status-venture\">\r\n    {{ventureName}}\r\n    <progress-bar [value]=\"ventureProgress\" [max]=\"ventureProgressMax\"></progress-bar>\r\n  </div>\r\n  <div fxFlex=\"10\" class=\"status-section status-other\">\r\n    <div>AP: {{ap}}</div>\r\n    <div>Gold: 100</div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Character } from 'src/app/models/character';\r\nimport { Venture } from 'src/app/models/venture';\r\nimport { CharacterService } from 'src/app/services/character.service';\r\nimport { GameService } from 'src/app/services/game.service';\r\n\r\n@Component({\r\n  selector: 'app-status-panel',\r\n  templateUrl: './status-panel.component.html',\r\n  styleUrls: ['./status-panel.component.scss']\r\n})\r\nexport class StatusPanelComponent implements OnInit {\r\n\r\n  constructor(private _gameService: GameService, private _characterService: CharacterService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  getCharacter(): Character {\r\n    return this._characterService.character;\r\n  }\r\n\r\n  getTargetVenture(): Venture {\r\n    const tgt = this._gameService.targetVenture;\r\n    if (tgt == null) {return null;}\r\n    return this._gameService.ventures.find(x => x.name == tgt);\r\n  }\r\n\r\n  // ======Display Getters======\r\n\r\n  get level() {\r\n    return this.getCharacter().level;\r\n  }\r\n\r\n  get xp() {\r\n    return this.getCharacter().xp;\r\n  }\r\n\r\n  get xpMax() {\r\n    return this._characterService.getLevelCost(this.level+1);\r\n  }\r\n\r\n  get stamina() {\r\n    return this.getCharacter().stamina;\r\n  }\r\n\r\n  get maxStamina() {\r\n    return this.getCharacter().maxStamina;\r\n  }\r\n\r\n  get ap() {\r\n    return this._gameService.ap;\r\n  }\r\n\r\n  get ventureName() {\r\n    const venture = this.getTargetVenture();\r\n    if (venture == null) {return \"\";}\r\n    let result = venture.name;\r\n    if (venture.encounterName != null) {\r\n      result += ` - ${venture.encounterName}`;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  get ventureProgress() {\r\n    const venture = this.getTargetVenture();\r\n    if (venture == null) {return 0;}\r\n    return venture.progress;\r\n  }\r\n\r\n  get ventureProgressMax() {\r\n    const venture = this.getTargetVenture();\r\n    if (venture == null) {return 100;}\r\n    return venture.progressMax;\r\n  }\r\n}\r\n","import { Stat } from \"../common/gameConstants\";\r\n\r\n\r\nexport class Character {\r\n  name: string;\r\n\r\n  stamina: number;\r\n  maxStamina: number;\r\n\r\n  level: number;\r\n  xp: number;\r\n\r\n  stats: Map<Stat, number> = new Map<Stat, number>();\r\n\r\n  skills: Skill[] = [];\r\n\r\n  perks: Perk[] = [];\r\n\r\n  stat(stat: Stat) {\r\n    if (!this.stats.has(stat)) {return 0;}\r\n    return this.stats.get(stat);\r\n  }\r\n\r\n  setStat(stat: Stat, value: number) {\r\n    this.stats.set(stat, value);\r\n  }\r\n\r\n  getStats() {\r\n    return this.stats.keys();\r\n  }\r\n\r\n  skill(skill: string) {\r\n    return this.skills.find(x => x.name == skill);\r\n  }\r\n\r\n  hasSkill(skill: string) {\r\n    return this.skills.some(x => x.name == skill);\r\n  }\r\n\r\n  addPerk(name: string) {\r\n    this.perks.push(new Perk(name));\r\n  }\r\n\r\n  hasPerk(name: string) {\r\n    return this.perks.some(x => x.name == name);\r\n  }\r\n}\r\n\r\nexport class Skill {\r\n  name: string;\r\n\r\n  rank: number = 1;\r\n  progress: number = 0;\r\n\r\n  itemBonus: number = 0;\r\n\r\n  constructor(name: string) {\r\n    this.name = name;\r\n  }\r\n\r\n  total(): number {\r\n    return this.rank + this.itemBonus;\r\n  }\r\n}\r\n\r\nexport class Perk {\r\n  name: string;\r\n\r\n  constructor(name: string) {\r\n    this.name = name;\r\n  }\r\n}\r\n","\r\nexport class Venture {\r\n  public name: string;\r\n  public encounterName: string = null;\r\n  public progress: number = 0;\r\n  public progressMax: number = 100;\r\n  public completions: number = 0;\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'displayNumber'\n})\nexport class DisplayNumberPipe implements PipeTransform {\n\n  transform(value: number, args?: any): string {\n\n    let prefix = '';\n    let suffix = '';\n    if (value < 0) {prefix = '-'; }\n    value = Math.abs(value);\n\n    if (value < 1000) {\n      return prefix + this.getSuffixedValue(value, suffix);\n    }\n\n    const decimalPlaces = Math.floor(Math.log10(value));\n    if (decimalPlaces < 6) {\n      value = (value / 1000);\n      suffix = 'K';\n    } else {\n      value = (value / 1000000);\n      suffix = 'M';\n    }\n\n    return prefix + this.getSuffixedValue(value, suffix);\n  }\n\n  getSuffixedValue(value: number, suffix: string): string {\n    if (value - Math.floor(value) > 0.01) {\n      return value.toFixed(2) + suffix;\n    }\n    return value.toFixed(0) + suffix;\n  }\n\n}\n","import { Injectable } from '@angular/core';\r\nimport { Character, Perk, Skill } from '../models/character';\r\nimport { EncounterDef } from '../staticData/encounterDefinitions';\r\nimport { getItemDef } from '../staticData/itemDefinitions';\r\nimport { PERK_LIBRARY } from '../staticData/perkDefinitions';\r\nimport { getSkillDef, SKILL_LIBRARY } from '../staticData/skillDefinitions';\r\nimport { GameService } from './game.service';\r\nimport { MessageService } from './message.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CharacterService {\r\n\r\n  private _gameService: GameService;\r\n\r\n  public character: Character = null;\r\n  public availablePerks: Perk[] = [];\r\n\r\n  public items: string[] = [];\r\n\r\n  constructor(private _messageService: MessageService) { }\r\n\r\n  setGameService(svc: GameService) {\r\n    this._gameService = svc;\r\n  }\r\n\r\n  rollNewCharacter(): void {\r\n    const die = this._gameService.getCurrentDie();\r\n    this.character = new Character();\r\n    this.character.name = \"Bob the Adventurer\";\r\n    this.character.xp = 0;\r\n    this.character.level = 1;\r\n\r\n    this._gameService.unlockedStats.forEach(x => {\r\n      this.character.setStat(x, die.roll());\r\n    });\r\n\r\n    this.initSkills();\r\n\r\n    // TODO: Sell old items\r\n    this.items = [];\r\n\r\n    this.character.maxStamina = (this.character.stat(\"body\")+2)*3;\r\n    this.character.stamina = this.character.maxStamina;\r\n\r\n    this._gameService.targetVenture = null;\r\n    this._gameService.resting = false;\r\n\r\n    this._messageService.addMessage(\"Welcome, \" + this.character.name + \"!\");\r\n\r\n    this._gameService.initVentures();\r\n    this._gameService.initSim();\r\n\r\n    this.updateSkills();\r\n    this.updateAvailablePerks();\r\n  }\r\n\r\n  // ======Level======\r\n\r\n  gainXp(xp: number): void {\r\n    this.character.xp += xp;\r\n\r\n    const nextLevelCost = this.getLevelCost(this.character.level+1);\r\n    if (this.character.xp >= nextLevelCost) {\r\n      this.character.xp -= nextLevelCost;\r\n      this.gainLevel();\r\n    }\r\n  }\r\n\r\n  gainLevel(): void {\r\n    this.character.level++;\r\n    const newLevel = this.character.level;\r\n    this._messageService.addMessage(\"You have reached level \" + newLevel + \"!\");\r\n\r\n    const die = this._gameService.getCurrentDie();\r\n    for (let stat of this.character.getStats()) {\r\n      const curStat = this.character.stat(stat);\r\n      const increase = Math.floor(die.roll()/3);\r\n      if (increase > 0) {\r\n        this._messageService.addMessage(`Your ${stat} has increased by ${increase}.`);\r\n        this.character.setStat(stat, curStat + increase);\r\n      }\r\n    }\r\n\r\n    this.character.maxStamina = (this.character.stat(\"body\")+2)*3;\r\n    this.character.stamina = this.character.maxStamina;\r\n\r\n    const newAp = Math.max(0, newLevel*newLevel - 3);\r\n    this._gameService.ap += newAp;\r\n    this._messageService.addMessage(\"You have gained \" + newAp + \" AP.\");\r\n\r\n    this.updateSkills();\r\n  }\r\n\r\n  getLevelCost(level: number): number {\r\n    return 150 + (((level*level)-4)*135);\r\n  }\r\n\r\n  // ======Skills======\r\n\r\n  initSkills(): void {\r\n    this.character.skills = [];\r\n    SKILL_LIBRARY.forEach(x => {\r\n      this.character.skills.push(new Skill(x.name));\r\n    });\r\n  }\r\n\r\n  updateSkills(): void {\r\n    this.character.skills.forEach(x => {\r\n      x.itemBonus = 0;\r\n    });\r\n\r\n    this.items.forEach(x => {\r\n      const def = getItemDef(x);\r\n\r\n      let canUse = true;\r\n      if (def.requiredStat != null) {\r\n        if (def.requiredStatAmount > this.character.stat(def.requiredStat)) {canUse = false;}\r\n      }\r\n\r\n      if (canUse) {\r\n        const skill = this.character.skill(def.skill);\r\n        if (skill != null) {\r\n          skill.itemBonus += def.strength;\r\n        }\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  bestSkillForEncounter(encounter: EncounterDef): string {\r\n    let bestSkill = null;\r\n    let bestStrength = 0;\r\n    encounter.skills.forEach(s => {\r\n      if (!this.character.hasSkill(s.skill)) {return;}\r\n      const skillDef = getSkillDef(s.skill);\r\n      if (this.character.stat(skillDef.stat) <= 0) {return;} // Can't use a skill with no supporting stat\r\n      const str = this.character.skill(s.skill).total() * s.strength;\r\n      if (str > bestStrength) {\r\n        bestSkill = s.skill;\r\n        bestStrength = str;\r\n      }\r\n    });\r\n\r\n    return bestSkill;\r\n  }\r\n\r\n  advanceSkill(skill: string, dT: number) {\r\n    const s = this.character.skill(skill);\r\n    const sDef = getSkillDef(skill);\r\n    const relatedStat = this.character.stat(sDef.stat);\r\n    s.progress += relatedStat*relatedStat*dT;\r\n\r\n    const nextRankCost = this.getSkillRankCost(skill, s.rank+1);\r\n    if (s.progress >= nextRankCost) {\r\n      s.progress -= nextRankCost;\r\n      s.rank++;\r\n      this._messageService.addMessage(`Your ${skill} skill has increased to ${s.rank}.`);\r\n    }\r\n  }\r\n\r\n  getSkillRankCost(skill: string, rank: number): number {\r\n    const def = getSkillDef(skill);\r\n    return 25 + (((rank*rank)-2)*45*def.cost);\r\n  }\r\n\r\n\r\n  // ======Perks======\r\n\r\n  buyPerk(name: string): void {\r\n    this.character.addPerk(name);\r\n    this.updateAvailablePerks();\r\n  }\r\n\r\n  updateAvailablePerks(): void {\r\n    this.availablePerks = [];\r\n    PERK_LIBRARY.forEach(x => {\r\n      if (this.character.hasPerk(x.name)) {return;}\r\n      this.availablePerks.push(new Perk(x.name));\r\n    });\r\n  }\r\n\r\n  // ======Items======\r\n\r\n  gainItem(item: string): void {\r\n    this._messageService.addMessage(`You found a ${item}.`);\r\n\r\n    if (this.items.indexOf(item) != -1) {\r\n      this._messageService.addMessage(`You already have one, so you sold it.`);\r\n    }\r\n    else {\r\n      this.items.push(item);\r\n    }\r\n\r\n    this.updateSkills();\r\n  }\r\n\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Stat } from '../common/gameConstants';\r\nimport { Character, Skill } from '../models/character';\r\nimport { Venture } from '../models/venture';\r\nimport { DieDef, DIE_LIBRARY } from '../staticData/dieDefinitions';\r\nimport { EncounterDef, ENCOUNTER_LIBRARY } from '../staticData/encounterDefinitions';\r\nimport { ItemDef, ITEM_LIBRARY } from '../staticData/itemDefinitions';\r\nimport { SkillDef, SKILL_LIBRARY } from '../staticData/skillDefinitions';\r\nimport { VentureDef, VENTURE_LIBRARY } from '../staticData/ventureDefinitions';\r\nimport { CharacterService } from './character.service';\r\nimport { MessageService } from './message.service';\r\nimport { TimeService } from './time.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GameService {\r\n\r\n  public ventures: Venture[] = [];\r\n\r\n  public ap: number = 0;\r\n  public dieRank: number = 0;\r\n  public unlockedStats: Stat[] = [\"body\"];\r\n\r\n  public targetVenture: string;\r\n  public resting: boolean = false;\r\n\r\n  private _init: boolean = false;\r\n\r\n  constructor(private _timeService: TimeService, private _messageService: MessageService,\r\n              private _characterService: CharacterService) {\r\n    _characterService.setGameService(this);\r\n  }\r\n\r\n  initVentures(): void {\r\n    this.ventures = [];\r\n    VENTURE_LIBRARY.forEach(def => {\r\n      const v = new Venture();\r\n      v.name = def.name;\r\n      this.ventures.push(v);\r\n    });\r\n  }\r\n\r\n  initSim(): void {\r\n    if (this._init) {return;}\r\n    this._timeService.tick.subscribe(x => this.tick(x));\r\n    this._init = true;\r\n  }\r\n\r\n  // ======Simulation======\r\n\r\n  tick(dT: number): void {\r\n    const character = this._characterService.character;\r\n    if (character == null) {return;}\r\n\r\n    // Do Rest\r\n    if (this.resting) {\r\n      character.stamina += 5*dT;\r\n      if (character.stamina >= character.maxStamina) {\r\n        character.stamina = character.maxStamina;\r\n        this.resting = false;\r\n      }\r\n    }\r\n\r\n    // Progress current venture\r\n    else if (this.targetVenture != null) {\r\n      const venture = this.ventures.find(x => x.name == this.targetVenture);\r\n      if (venture == null) {return;}\r\n\r\n      // If there isn't an encounter, init an encounter\r\n      if (venture.encounterName == null) {\r\n        this.startEncounter(venture);\r\n      }\r\n\r\n      const encDef = this.getEncounterDef(venture.encounterName);\r\n\r\n      const bestSkill = this._characterService.bestSkillForEncounter(encDef);\r\n      if (bestSkill != null) {\r\n        const encSkill = encDef.skills.find(x => x.skill == bestSkill);\r\n        const charSkillStr = character.skill(bestSkill).total();\r\n        venture.progress += 6*encSkill.strength*charSkillStr*dT;\r\n        this._characterService.advanceSkill(bestSkill, dT);\r\n      }\r\n      else {\r\n        venture.progress += dT;\r\n      }\r\n\r\n      character.stamina -= dT*encDef.staminaDrain;\r\n\r\n      if (character.stamina <= 0) {this.resting = true;}\r\n\r\n      if (venture.progress > venture.progressMax) {\r\n        venture.completions++;\r\n        venture.progress = 0;\r\n        this._messageService.addMessage(\"You slay the \" + venture.encounterName + \".\");\r\n\r\n        let xpReward = 65 + (Math.pow(encDef.level, 1.5)*15);\r\n\r\n        this._characterService.gainXp(xpReward);\r\n        if (encDef.itemReward != null) {\r\n          this._characterService.gainItem(encDef.itemReward);\r\n        }\r\n\r\n        this.startEncounter(venture);\r\n      }\r\n\r\n    }\r\n\r\n    // Degen venture progress\r\n    this.ventures.forEach(x => {\r\n      if (x.progress > 0 && (this.resting || this.targetVenture != x.name)) {\r\n        const encDef = this.getEncounterDef(x.encounterName);\r\n        const progDegen = x.progressMax*(encDef.progressDegenPct/100);\r\n        x.progress -= progDegen*dT;\r\n        if (x.progress <= 0) {\r\n          x.progress = 0;\r\n          this._messageService.addMessage(`The ${x.encounterName} wandered off while you were asleep.`);\r\n          x.encounterName = null;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // ======Character Operations======\r\n\r\n  rest(): void {\r\n    this.resting = true;\r\n  }\r\n\r\n  //======Venture Operations======\r\n\r\n  getVentureDef(name: string): VentureDef {\r\n    return VENTURE_LIBRARY.find(x => x.name == name);\r\n  }\r\n\r\n  getEncounterDef(name: string): EncounterDef {\r\n    return ENCOUNTER_LIBRARY.find(x => x.name == name);\r\n  }\r\n\r\n  selectVenture(venture: Venture): void {\r\n    this.targetVenture = venture.name;\r\n  }\r\n\r\n  startEncounter(venture: Venture): void {\r\n    const def = this.getVentureDef(venture.name);\r\n    const encounter = def.getRandomEncounter();\r\n    const encDef = this.getEncounterDef(encounter);\r\n    venture.encounterName = encounter;\r\n    venture.progressMax = 15*Math.pow(encDef.level, 2.2);\r\n  }\r\n\r\n  //======Die Operations======\r\n\r\n  getCurrentDie(): DieDef {\r\n    return DIE_LIBRARY[this.dieRank];\r\n  }\r\n\r\n  getNextDie(): DieDef {\r\n    if (DIE_LIBRARY.length <= this.dieRank+1) {return null;}\r\n    return DIE_LIBRARY[this.dieRank+1];\r\n  }\r\n\r\n  upgradeDie(): void {\r\n    if (DIE_LIBRARY.length <= this.dieRank+1) {return;}\r\n    this.dieRank++;\r\n  }\r\n\r\n  //======AP Unlocks======\r\n\r\n  getNextStatUnlock() {\r\n    if (this.unlockedStats.length == 1) {\r\n      return {stat: \"agility\", cost: 10};\r\n    }\r\n    if (this.unlockedStats.length == 2) {\r\n      return {stat: \"mind\", cost: 25};\r\n    }\r\n    return null;\r\n  }\r\n\r\n  unlockStat() {\r\n    const unlock = this.getNextStatUnlock();\r\n    if (unlock == null) {return;}\r\n    this.unlockedStats.push(unlock.stat as Stat);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MessageService {\n\n  msgFeed: Subject<string> = new Subject();\n\n  constructor() { }\n\n  addMessage(message: string) {\n    this.msgFeed.next(message);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { interval, Subject, Subscription } from 'rxjs';\n\nconst tickRate = 100;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TimeService {\n\n  tick: Subject<number> = new Subject();\n  private _timerSubscription: Subscription = null;\n\n  constructor() { }\n\n  startGame() {\n    if (this._timerSubscription != null) {\n      this._timerSubscription.unsubscribe();\n    }\n    this._timerSubscription = interval(tickRate).subscribe(x => this.tick.next(tickRate/1000));\n  }\n}\n","\r\nexport class DieDef {\r\n  constructor(\r\n    public count: number,\r\n    public faces: number,\r\n    public cost: number\r\n    ) { }\r\n\r\n    roll(): number {\r\n      let total = 0;\r\n      for (let i = 0; i < this.count; i++) {\r\n        total += Math.floor(Math.random()*this.faces) + 1;\r\n      }\r\n      return total;\r\n    }\r\n}\r\n\r\nexport const DIE_LIBRARY: DieDef[] = [\r\n  new DieDef(1, 4, 1),\r\n  new DieDef(1, 6, 1),\r\n  new DieDef(1, 8, 5),\r\n  new DieDef(1, 10, 8),\r\n  new DieDef(2, 6, 14),\r\n  new DieDef(2, 8, 20),\r\n  new DieDef(3, 6, 30),\r\n  new DieDef(3, 8, 45),\r\n  new DieDef(4, 6, 70),\r\n  new DieDef(4, 8, 100),\r\n  new DieDef(6, 6, 150)\r\n];\r\n","\r\nexport class EncounterSkillDef {\r\n  skill: string;\r\n  strength: number;\r\n\r\n  constructor(skill: string, strength = 1) {\r\n    this.skill = skill;\r\n    this.strength = strength;\r\n  }\r\n}\r\n\r\nexport class EncounterDef {\r\n  name: string;\r\n  level: number;\r\n  progressDegenPct: number = 7;\r\n  staminaDrain: number = 1;\r\n  itemReward: string = null;\r\n  skills: EncounterSkillDef[] = [];\r\n\r\n\r\n  constructor(name: string, level: number) {\r\n    this.name = name;\r\n    this.level = level;\r\n  }\r\n\r\n  getSkill(skill: string) {\r\n    const s = this.skills.find(x => x.skill == skill);\r\n    if (s == null) {return 0;}\r\n    return s.strength;\r\n  }\r\n\r\n  item(item: string) {\r\n    this.itemReward = item;\r\n    return this;\r\n  }\r\n\r\n  addSkill(skill: string, strength = 1) {\r\n    let def = this.skills.find(x => x.skill == skill);\r\n    if (def == null) {\r\n      def = new EncounterSkillDef(skill);\r\n      this.skills.push(def);\r\n    }\r\n    def.strength = strength;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport class CombatEncounterDef extends EncounterDef {\r\n  constructor(name: string, level: number) {\r\n    super(name, level);\r\n    this.initCombatSkills();\r\n  }\r\n\r\n  initCombatSkills() {\r\n    this.skills.push(new EncounterSkillDef(\"melee\"));\r\n    this.skills.push(new EncounterSkillDef(\"ranged\"));\r\n    this.skills.push(new EncounterSkillDef(\"magic\"));\r\n  }\r\n\r\n  resist(skill: string) {\r\n    this.addSkill(skill, 0.5);\r\n    return this;\r\n  }\r\n\r\n  weak(skill: string) {\r\n    this.addSkill(skill, 2);\r\n    return this;\r\n  }\r\n}\r\n\r\nexport const ENCOUNTER_LIBRARY: EncounterDef[] = [\r\n  new CombatEncounterDef(\"rat\", 1)\r\n    .item(\"shortbow\"),\r\n  new CombatEncounterDef(\"slime mold\", 1).resist(\"ranged\"),\r\n  new CombatEncounterDef(\"brutal rat\", 2)\r\n    .item(\"knife\"),\r\n  new CombatEncounterDef(\"wolf\", 3),\r\n  new CombatEncounterDef(\"felsprite\", 2)\r\n    .resist(\"melee\").resist(\"ranged\"),\r\n  new CombatEncounterDef(\"dire rat\", 3),\r\n  new CombatEncounterDef(\"goblin scout\", 5),\r\n  new CombatEncounterDef(\"goblin guard\", 7),\r\n  new CombatEncounterDef(\"goblin sage\", 8)\r\n    .resist(\"magic\"),\r\n  new CombatEncounterDef(\"hobgoblin overseer\", 10)\r\n    .resist(\"ranged\"),\r\n  new CombatEncounterDef(\"goblin shaman\", 9)\r\n    .resist(\"magic\"),\r\n  new CombatEncounterDef(\"hobgoblin graverobber\", 15)\r\n    .resist(\"ranged\"),\r\n  new CombatEncounterDef(\"corpse wight\", 18)\r\n    .resist(\"melee\").resist(\"ranged\"),\r\n  new CombatEncounterDef(\"tomb lord\", 20)\r\n    .item(\"staff of ancients\")\r\n\r\n];\r\n","import { Stat } from \"../common/gameConstants\";\r\n\r\nexport class ItemDef {\r\n  public name: string;\r\n  public skill: string = null;\r\n  public strength: number = 0;\r\n  public requiredStat: Stat = null;\r\n  public requiredStatAmount: number = 0;\r\n  public gold: number = 1;\r\n\r\n  constructor(name: string) {\r\n    this.name = name;\r\n  }\r\n\r\n  setSkill(skill: string, strength: number) {\r\n    this.skill = skill;\r\n    this.strength = strength;\r\n    return this;\r\n  }\r\n\r\n  setReq(stat: Stat, amount: number) {\r\n    this.requiredStat = stat;\r\n    this.requiredStatAmount = amount;\r\n    return this;\r\n  }\r\n\r\n  setValue(gold: number) {\r\n    this.gold = gold;\r\n  }\r\n}\r\n\r\nexport function getItemDef(name: string): ItemDef {\r\n  return ITEM_LIBRARY.find(x => x.name == name);\r\n}\r\n\r\nexport const ITEM_LIBRARY: ItemDef[] = [\r\n  new ItemDef(\"knife\").setSkill(\"melee\", 2)\r\n    .setReq(\"body\", 2),\r\n  new ItemDef(\"shortbow\").setSkill(\"ranged\", 7)\r\n    .setReq(\"body\", 2),\r\n  new ItemDef(\"longbow\").setSkill(\"ranged\", 14)\r\n    .setReq(\"body\", 5),\r\n  new ItemDef(\"staff of ancients\").setSkill(\"magic\", 25)\r\n    .setReq(\"mind\", 15)\r\n];\r\n","import { Stat } from \"../common/gameConstants\";\r\n\r\nexport class PerkDef {\r\n\r\n  public name: string;\r\n  public cost: number = 1;\r\n  public creationOnly: boolean = false;\r\n  public requiredLevel: number = 1;\r\n  public requiredStat: Stat = null;\r\n  public requiredStatValue: number = 0;\r\n\r\n  constructor(name: string) {\r\n    this.name = name;\r\n  }\r\n\r\n  setRequiredStat(stat: Stat, value: number) {\r\n    this.requiredStat = stat;\r\n    this.requiredStatValue = value;\r\n    return this;\r\n  }\r\n\r\n  setLevel(level: number) {\r\n    this.requiredLevel = level;\r\n    return this;\r\n  }\r\n\r\n  setCreationOnly() {\r\n    this.creationOnly = true;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport function getPerkDef(name: string): PerkDef {\r\n  return PERK_LIBRARY.find(x => x.name == name);\r\n}\r\n\r\nexport const PERK_LIBRARY: PerkDef[] = [\r\n  new PerkDef(\"Alchemy\"),\r\n  new PerkDef(\"Pathfinding\"),\r\n  new PerkDef(\"Feint\"),\r\n  new PerkDef(\"Divine Rites\")\r\n]\r\n","\r\nexport class RegionDef {\r\n  public name: string;\r\n\r\n  constructor(name: string) {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\n\r\nexport const REGION_LIBRARY: RegionDef[] = [\r\n  new RegionDef(\"The Village\"),\r\n  new RegionDef(\"Lost Woods\"),\r\n  new RegionDef(\"City of Isling\"),\r\n  new RegionDef(\"Undermountain\"),\r\n  new RegionDef(\"Chaos Keep\"),\r\n  new RegionDef(\"Astral Reach\"),\r\n  new RegionDef(\"Dark Dimension\")\r\n];\r\n","import { Stat } from \"../common/gameConstants\";\r\n\r\nexport class SkillDef {\r\n\r\n  public name: string;\r\n  public stat: Stat = null;\r\n  public cost: number = 1; // Multiplier\r\n  public group: string = \"other\";\r\n\r\n  constructor(name: string) {\r\n    this.name = name;\r\n  }\r\n\r\n  setGroup(group: string) {\r\n    this.group = group;\r\n    return this;\r\n  }\r\n\r\n  setStat(stat: Stat) {\r\n    this.stat = stat;\r\n    return this;\r\n  }\r\n\r\n  setCost(cost: number) {\r\n    this.cost = cost;\r\n    return this;\r\n  }\r\n\r\n}\r\n\r\nexport function getSkillDef(name: string): SkillDef {\r\n  return SKILL_LIBRARY.find(x => x.name == name);\r\n}\r\n\r\nexport const SKILL_LIBRARY: SkillDef[] = [\r\n  new SkillDef(\"melee\").setStat(\"body\").setGroup(\"combat\").setCost(1),\r\n  new SkillDef(\"ranged\").setStat(\"agility\").setGroup(\"combat\").setCost(1),\r\n  new SkillDef(\"magic\").setStat(\"mind\").setGroup(\"combat\").setCost(1),\r\n\r\n  new SkillDef(\"armor\").setGroup(\"defense\"),\r\n  new SkillDef(\"dodge\").setGroup(\"defense\"),\r\n  new SkillDef(\"clarity\").setGroup(\"defense\"),\r\n\r\n  new SkillDef(\"conditioning\"),\r\n  new SkillDef(\"tactics\"),\r\n  new SkillDef(\"martial\"),\r\n  new SkillDef(\"negotiation\"),\r\n  new SkillDef(\"investigation\"),\r\n  new SkillDef(\"scout\"),\r\n  new SkillDef(\"concentration\"),\r\n  new SkillDef(\"ritual\"),\r\n  new SkillDef(\"deception\"),\r\n  new SkillDef(\"sneak\"),\r\n\r\n];\r\n","\r\n\r\nexport class VentureDef {\r\n  name: string;\r\n  encounters: string[] = [];\r\n  prereqName: string;\r\n  prereqRank: number;\r\n\r\n  constructor (\r\n    name: string\r\n  ) {\r\n    this.name = name;\r\n  }\r\n\r\n  public getRandomEncounter(): string {\r\n    const random = Math.floor(Math.random()*this.encounters.length);\r\n    return this.encounters[random];\r\n  }\r\n\r\n  public addEncounter(name: string) {\r\n    this.encounters.push(name);\r\n    return this;\r\n  }\r\n\r\n  public addPrereq(name: string, rank: number) {\r\n    this.prereqName = name;\r\n    this.prereqRank = rank;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport const VENTURE_LIBRARY: VentureDef[] = [\r\n  new VentureDef(\"The Innkeeper's Basement\")\r\n    .addEncounter(\"rat\")\r\n    .addEncounter(\"slime mold\")\r\n    .addEncounter(\"brutal rat\"),\r\n  new VentureDef(\"The Thicket\")\r\n    .addPrereq(\"The Innkeeper's Basement\", 5)\r\n    .addEncounter(\"brutal rat\")\r\n    .addEncounter(\"wolf\")\r\n    .addEncounter(\"felsprite\")\r\n    .addEncounter(\"dire rat\")\r\n    .addEncounter(\"goblin scout\"),\r\n  new VentureDef(\"The Goblin Caves\")\r\n    .addPrereq(\"The Thicket\", 5)\r\n    .addEncounter(\"dire rat\")\r\n    .addEncounter(\"goblin scout\")\r\n    .addEncounter(\"goblin guard\")\r\n    .addEncounter(\"goblin sage\")\r\n    .addEncounter(\"hobgoblin overseer\"),\r\n  new VentureDef(\"The Lost Tomb\")\r\n    .addPrereq(\"The Lost Tomb\", 5)\r\n    .addEncounter(\"goblin sage\")\r\n    .addEncounter(\"goblin shaman\")\r\n    .addEncounter(\"hobgoblin graverobber\")\r\n    .addEncounter(\"corpse wight\")\r\n    .addEncounter(\"tomb lord\")\r\n];\r\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}